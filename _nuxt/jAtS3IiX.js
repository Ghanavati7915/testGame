import{D as g,d as M,r as u,o as _,g as c,v as y,x as p,A as v,y as l,B as x,F as X,E as Y,G as $}from"./BxJXgdpn.js";const h=g("/img/sample/building-4.png"),D=g("/img/sample/building-5.png"),N=g("/img/sample/building-6.png"),P=g("/img/sample/building-7.png"),j=g("/img/sample/building-8.png"),A=g("/img/sample/building-9.png"),I=g("/img/sample/building-10.png"),R={class:"navbar"},F=M({__name:"game-2",setup(S){const d=u(null),r=u(null),b=u([]),k=u({width:window.innerWidth,height:window.innerHeight,draggable:!0}),f=u({x:0,y:0,width:2500,height:1400,image:null}),C=()=>{const t=new window.Image;t.src="/testGame/img/bg2.jpg",t.onload=()=>{f.value.image=t}},a=t=>{const n=new window.Image;n.src=t,n.onload=()=>{const i=d.value.getNode(),o=i.width()/2,s=i.height()/2,e=o+(Math.random()*100-50),m=s+(Math.random()*100-50);b.value.push({x:e,y:m,width:100,height:100,image:n,draggable:!0})}},G=()=>{if(!d.value)return;const t=d.value.getNode();t.on("wheel",n=>{n.evt.preventDefault(),w(t,n.evt.deltaY>0?-1:1,t.getPointerPosition())}),t.on("touchmove",n=>{const i=n.evt.touches[0],o=n.evt.touches[1];if(i&&o){const s=Math.sqrt(Math.pow(o.clientX-i.clientX,2)+Math.pow(o.clientY-i.clientY,2));r.value&&w(t,s>r.value?1:-1,{x:(i.clientX+o.clientX)/2,y:(i.clientY+o.clientY)/2}),r.value=s}}),t.on("touchend",()=>{r.value=null})},w=(t,n,i)=>{const s=t.scaleX();let e=n>0?s*1.05:s/1.05;e=Math.min(5,Math.max(1,e));const m={x:(i.x-t.x())/s,y:(i.y-t.y())/s},B={x:i.x-m.x*e,y:i.y-m.y*e};t.scale({x:e,y:e}),t.position(B),t.batchDraw()};return _(()=>{C(),G()}),(t,n)=>{const i=c("v-image"),o=c("v-layer"),s=c("v-stage");return p(),y("div",null,[v(s,{ref_key:"stageRef",ref:d,config:k.value},{default:x(()=>[v(o,null,{default:x(()=>[v(i,{config:f.value},null,8,["config"]),(p(!0),y(X,null,Y(b.value,(e,m)=>(p(),$(i,{key:m,config:e},null,8,["config"]))),128))]),_:1})]),_:1},8,["config"]),l("div",R,[l("div",{class:"item",onClick:n[0]||(n[0]=e=>a("/testGame/img/sample/building-4.png"))},n[7]||(n[7]=[l("img",{src:h,alt:"building-4"},null,-1)])),l("div",{class:"item",onClick:n[1]||(n[1]=e=>a("/testGame/img/sample/building-5.png"))},n[8]||(n[8]=[l("img",{src:D,alt:"building-5"},null,-1)])),l("div",{class:"item",onClick:n[2]||(n[2]=e=>a("/testGame/img/sample/building-6.png"))},n[9]||(n[9]=[l("img",{src:N,alt:"building-6"},null,-1)])),l("div",{class:"item",onClick:n[3]||(n[3]=e=>a("/testGame/img/sample/building-7.png"))},n[10]||(n[10]=[l("img",{src:P,alt:"building-7"},null,-1)])),l("div",{class:"item",onClick:n[4]||(n[4]=e=>a("/testGame/img/sample/building-8.png"))},n[11]||(n[11]=[l("img",{src:j,alt:"building-8"},null,-1)])),l("div",{class:"item",onClick:n[5]||(n[5]=e=>a("/testGame/img/sample/building-9.png"))},n[12]||(n[12]=[l("img",{src:A,alt:"building-9"},null,-1)])),l("div",{class:"item",onClick:n[6]||(n[6]=e=>a("/testGame/img/sample/building-10.png"))},n[13]||(n[13]=[l("img",{src:I,alt:"building-10"},null,-1)]))])])}}});export{F as default};
