import{D as a,d as _,r as u,o as X,g as c,v as y,x as p,A as v,y as l,B as x,F as Y,E as $,G as h}from"./DJ6u8n_y.js";const D=a("/img/sample/building-4.png"),N=a("/img/sample/building-5.png"),P=a("/img/sample/building-6.png"),j=a("/img/sample/building-7.png"),A=a("/img/sample/building-8.png"),I=a("/img/sample/building-9.png"),R=a("/img/sample/building-10.png"),S={class:"navbar"},G=_({__name:"game-2",setup(E){const d=u(null),r=u(null),b=u([]),k=u({width:window.innerWidth,height:window.innerHeight,draggable:!0}),f=u({x:0,y:0,width:1872,height:1062,image:null}),C=()=>{const t=new window.Image;t.src="/testGame/img/bg2.jpg",t.onload=()=>{f.value.image=t}},g=t=>{const n=new window.Image;n.src=t,n.onload=()=>{const e=d.value.getNode(),o=e.width()/2,s=e.height()/2,i=o+(Math.random()*100-50),m=s+(Math.random()*100-50);b.value.push({x:i,y:m,width:100,height:100,image:n,draggable:!0})}},B=()=>{if(!d.value)return;const t=d.value.getNode();t.on("wheel",n=>{n.evt.preventDefault(),w(t,n.evt.deltaY>0?-1:1,t.getPointerPosition())}),t.on("touchmove",n=>{const e=n.evt.touches[0],o=n.evt.touches[1];if(e&&o){const s=Math.sqrt(Math.pow(o.clientX-e.clientX,2)+Math.pow(o.clientY-e.clientY,2));r.value&&w(t,s>r.value?1:-1,{x:(e.clientX+o.clientX)/2,y:(e.clientY+o.clientY)/2}),r.value=s}}),t.on("touchend",()=>{r.value=null})},w=(t,n,e)=>{const s=t.scaleX();let i=n>0?s*1.05:s/1.05;i=Math.min(5,Math.max(1,i));const m={x:(e.x-t.x())/s,y:(e.y-t.y())/s},M={x:e.x-m.x*i,y:e.y-m.y*i};t.scale({x:i,y:i}),t.position(M),t.batchDraw()};return X(()=>{C(),B()}),(t,n)=>{const e=c("v-image"),o=c("v-layer"),s=c("v-stage");return p(),y("div",null,[v(s,{ref_key:"stageRef",ref:d,config:k.value},{default:x(()=>[v(o,null,{default:x(()=>[v(e,{config:f.value},null,8,["config"]),(p(!0),y(Y,null,$(b.value,(i,m)=>(p(),h(e,{key:m,config:i},null,8,["config"]))),128))]),_:1})]),_:1},8,["config"]),l("div",S,[l("div",{class:"item",onClick:n[0]||(n[0]=i=>g("/img/sample/building-4.png"))},n[7]||(n[7]=[l("img",{src:D,alt:"building-4"},null,-1)])),l("div",{class:"item",onClick:n[1]||(n[1]=i=>g("/img/sample/building-5.png"))},n[8]||(n[8]=[l("img",{src:N,alt:"building-5"},null,-1)])),l("div",{class:"item",onClick:n[2]||(n[2]=i=>g("/img/sample/building-6.png"))},n[9]||(n[9]=[l("img",{src:P,alt:"building-6"},null,-1)])),l("div",{class:"item",onClick:n[3]||(n[3]=i=>g("/img/sample/building-7.png"))},n[10]||(n[10]=[l("img",{src:j,alt:"building-7"},null,-1)])),l("div",{class:"item",onClick:n[4]||(n[4]=i=>g("/img/sample/building-8.png"))},n[11]||(n[11]=[l("img",{src:A,alt:"building-8"},null,-1)])),l("div",{class:"item",onClick:n[5]||(n[5]=i=>g("/img/sample/building-9.png"))},n[12]||(n[12]=[l("img",{src:I,alt:"building-9"},null,-1)])),l("div",{class:"item",onClick:n[6]||(n[6]=i=>g("/img/sample/building-10.png"))},n[13]||(n[13]=[l("img",{src:R,alt:"building-10"},null,-1)]))])])}}});export{G as default};
